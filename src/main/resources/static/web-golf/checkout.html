<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <link rel="stylesheet" href="./checkout.css">
    <title>Golf Paradise | Checkout</title>
</head>
<body>
<div id="app">

    <main class="my-4 container ">

        <div class="row g-2">
            <div class="col-lg-9">
                <div class="col-12 mb-4">
                    <div class="container">
                        <form class="row py-4 border border-dark-subtle rounded-2 bg-white" id="my-form">
                            <h4>Payment Method</h4>
                            <div class="col-12">
                                <label for="cardHolder" class="form-label">Card Holder</label>
                                <input type="text" class="form-control" id="cardHolder">
                            </div>
                            <div class="col-md-8 mt-2">
                                <label for="cardNumber" class="form-label">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber" v-model="cardNumber" maxlength="16" required>
                                <small class="text-danger d-block" v-if="v$.cardNumber.$error">{{ v$.cardNumber.$errors[0].$message }}</small>
                            </div>
                            <div class="col-md-4 mt-2">
                                <label for="cardCvv" class="form-label">Card CVV</label>
                                <input type="text" class="form-control" id="cardCvv" v-model="cardCvv" maxlength="3" required>
                                <small class="text-danger d-block" v-if="v$.cardCvv.$error">{{ v$.cardCvv.$errors[0].$message }}</small>
                            </div>
                            <div class="col-md-8 mt-2">
                                <label for="deliveryAddress" class="form-label">Delivery Address</label>
                                <input type="text" class="form-control" id="deliveryAddress" v-model="deliveryAddress" maxlength="16" required>
                                <small class="text-danger d-block" v-if="v$.deliveryAddress.$error">{{ v$.deliveryAddress.$errors[0].$message }}</small>
                            </div>
                            <div class="col-md-4 mt-2">
                                <label for="zipCode" class="form-label">Zip Code</label>
                                <input type="text" class="form-control" id="zipCode" v-model="zipCode" maxlength="4" required @change="getDeliveryCost()">
                                <small class="text-danger d-block" v-if="v$.zipCode.$error">{{ v$.zipCode.$errors[0].$message }}</small>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="border border-dark-subtle rounded-2 bg-white table-products">
                    <table class="table" v-if="cart.length > 0">
                        <thead>
                            <tr class="py-2 bg-tr-checkout container">
                                <th class="text-center hide-mobile"></th>
                                <th class="text-center fw-bold">Product</th>
                                <th class="text-center fw-bold">Price</th>
                                <th class="text-center fw-bold">Quantity</th>
                                <th class="text-center fw-bold">Total Price</th>
                                <th class="text-center"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="product in cart" class="container ">
                                <td class="hide-mobile"><img :src="product.img" class="col-2 m-0 text-center img-product-checkout"></img></td>
                                <td class="text-center m-0 offcanvas-category text-success">{{ product.name }}</td>
                                <td class="text-center m-0">${{ product.price }}</td>
                                <td class="text-center">
                                    <div class="d-flex justify-content-center">
                                            <button class="cart-btn"
                                                    @click="removeProductQuantity(product)"
                                            >
                                                <i class="fa-solid fa-minus cart-icon"></i>
                                            </button>
                                            <p class="m-0 text-center"> {{ product.quantity }} </p>
                                            <button class="cart-btn "
                                                    :class="product.stock == 0 ? 'bg-white ' : ''"
                                                    @click="addProduct(product)"
                                                    :disabled="product.stock == 0 ? true : false"
                                            >
                                                <i class="fa-solid fa-plus cart-icon" :class="product.stock == 0 ? 'text-danger ' : ''"></i>
                                            </button>
                                        </div>
                                        <p v-if="product.stock == 0" class="text-center text-danger">No stock</p>
                                </td>
                                <td class="text-center fw-bold">${{ product.quantity * product.price }}</td>
                                <td><i class="fa-solid fa-trash trash-icon" @click="removeProduct(product)"></i></td>
                            </tr>
                        </tbody>
                    </table>
                    <div v-else>
                        <h4 class="py-4 px-2 text-center">No products added.</h4>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="border border-dark-subtle rounded-2 p-4 bg-white">
                    <h2 class="text-center fs-3">Checkout</h2>
                    <p class="fs-6"> <span  class="fw-bold">Amount:</span>  ${{ total }}</p>
                    <p class="fs-6"><span class="fw-bold">Delivery cost: </span>$ {{ deliveryCost }}</p>
                    <p class="fs-6"><span class="fw-bold">Total amount:</span> $ {{ total + deliveryCost }}</p>
                    <button type="submit" class="btn-custom w-100" form="my-form" @click="validateForm">Make Payment</button>
                </div>
            </div>
        </div>
    </main>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/2cd05a3c76.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-demi"></script>
<script src="https://cdn.jsdelivr.net/npm/@vuelidate/core"></script>
<script src="https://cdn.jsdelivr.net/npm/@vuelidate/validators"></script>
<script src="./checkout.js"></script>
</body>
</html>